# shell脚本监控 CPU和内存负载

## 监控服务器系统负载情况

### 用`uptime`命令查看当前负载情况（1分钟，5分钟，15分钟平均负载情况）在苹果公司的Mac电脑上也适用
代码如下:

`# uptime`

15:43:59 up 186 days, 20:04, 1 user, load average: 0.01, 0.02, 0.00

"load average"意思分别是1分钟、5分钟、15分钟内系统的平均负荷。

1. 主要观察"15分钟系统负荷"，将它作为电脑正常运行的指标。
2. 如果15分钟内，（系统负荷除以CPU核心数目之后的）平均负荷大于1.0，表明问题持续存在，不是暂时现象。
3. 当系统负荷持续大于0.7，你必须开始调查了，问题出在哪里，防止情况恶化。
4. 当系统负荷持续大于1.0，你必须动手寻找解决办法，把这个值降下来。
5. 当系统负荷达到5.0，就表明你的系统有很严重的问题，长时间没有响应，或者接近死机了。

假设你的电脑只有1个CPU。如果你的电脑装了2个CPU,意味着电脑的处理能力翻了一倍，能够同时处理的进程数量也翻了一倍。

2个CPU表明系统负荷可以达到2.0，此时每个CPU都达到100%的工作量。推广开来，n个CPU的电脑，可接受的系统负荷最大为n.0。

### 查看服务器cpu的总核数

`# grep -c 'model name' /proc/cpuinfo 或者 cat /proc/cpuinfo`

